<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>mysql | 知瑾</title><meta name="keywords" content="mysql"><meta name="author" content="知瑾"><meta name="copyright" content="知瑾"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="mysql"><meta name="application-name" content="mysql"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="mysql"><meta property="og:url" content="http://example.com/2022/07/16/Mysql/index.html"><meta property="og:site_name" content="知瑾"><meta property="og:description" content="简单介绍什么是数据库？什么是数据库管理系统？什么是SQL？他们之间的关系是什么？    关键字 介绍    数据库 DataBase简称DB，按照一定格式存储数据的一些文件的组合。   数据库管理系统 DataBaseManagement简称DBMS，是管理数据库中数据的，可以对数据进行增删改查的工"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://s2.loli.net/2022/02/03/P3sHyhJj7IZTzlK.png"><meta property="article:author" content="知瑾"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://s2.loli.net/2022/02/03/P3sHyhJj7IZTzlK.png"><meta name="description" content="简单介绍什么是数据库？什么是数据库管理系统？什么是SQL？他们之间的关系是什么？    关键字 介绍    数据库 DataBase简称DB，按照一定格式存储数据的一些文件的组合。   数据库管理系统 DataBaseManagement简称DBMS，是管理数据库中数据的，可以对数据进行增删改查的工"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2022/07/16/Mysql/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://cdn.jsdelivr.net/gh/berniezhong/picture-bed/github/202406031028986.png"},
  postHeadAiDescription: undefined,
  diytitle: undefined,
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:{"enable":true,"maxBarrage":1,"barrageTime":4000,"accessToken":"","mailMd5":""},
  root: '/',
  preloader: {"source":2},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    simplehomepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-right"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: true,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '知瑾',
  title: 'mysql',
  postAI: '',
  pageFillDescription: '简单介绍, SQL的语句分类, 常用基本命令：, Mac下安装 mysql, 启动停止重启命令, 使用终端连接数据库, 库的基本操作, 表的基本操作, 字段类型, 创建表, 查看表, 删除表, 复制表, 数据的增删改查, 条件查询, 单行处理函数, 分组函数（多行处理）, 排序, 查询顺序总结, limit, union合并集合, distinct去除重复, 连接查询, 子查询, 约束, 事务, 提交事务：, 回滚事务：, 事务特性：, 事务隔离：, 数据库三范式, Koa中使用mysql, 安装mysql, 调用mysql简单介绍什么是数据库什么是数据库管理系统什么是他们之间的关系是什么关键字介绍数据库简称按照一定格式存储数据的一些文件的组合数据库管理系统简称是管理数据库中数据的可以对数据进行增删改查的工具结构化查询语言通过编写语句然后通过负责执行语句完成对数据的增删改查操作关联执行操作数据库中最基本的单元是表用表格来表示数据如下张三男李四女王五男注意任何一张表都有行和列行称为数据列称为字段每个字段包含了字段名数据类型约束等属性比如唯一性约束姓名不能重复不能重复等的语句分类分类描述数据库查询语言凡是带有关键字的查询语句都称为语言数据库操作语言对数据操作的语句新增删除更新都称为语言数据定义语言对表结构操作的语句新增删除修改都称为语言事务语言事务提交事务回滚数据控制语言授权撤销常用基本命令文件中的数据导入文件路径路径中不要有中文不要有空格查看数据库版本号终止当前当前命令的输入查看表结构表名包含字段名字段类型等信息下安装分为两个步骤使用安装包直接安装下一步下一步直到安装成功就是了配置环境变量打开个人盘符找到添加以下环境变量配置终端进入个人盘符重新执行查看是否安装成功启动停止重启命令先进入安装路径下的目录登录管理员权限输入对应的命令启动服务停止服务重启服务使用终端连接数据库打开偏好设置找到关闭服务进入安装目录下的目录登录管理员权限禁用验证密码功能回车后会自动重启可以在偏好设置里看到是状态当前终端不关闭新建一个终端窗口进入安装目录下的目录启动数据库如看到以下界面代表数据库启动并且连接成功如果需要修改密码冲刷特权注意要加上分号设置新的密码你的新密码再次冲刷特权断开再次打开终端开启无密码登录然后重启即可库的基本操作操作数据库必须带分号否则不执行该命令不区分大小写创建数据库删除数据库显示当前数据库使用指定数据库表的基本操作表操作的语句被称为语句包括表的命名建议或者开始字段类型类型描述可变长度的字符串根据字段长度动态分配空间缺点效率低定长字符串分配固定长度的空间去存储数据使用不恰当会导致空间的浪费数字中的整数型数字中的长整型单精度浮点型数据双精度浮点型数据长日期包括时分秒短日期字符大对象最多个的字符串二进制大对象图片视频等媒体数据插入数据的时候要用流和怎么选例如性别字段固定长度的所以选择例如姓名字段不固定长度所以选择创建表表名字段名数据类型字段名数据类型默认值字段名数据类型字段注释模拟建表要求包含的字段名电影编号电影名字描述信息上映时间时长海报图片字段类型为的时候插入数据要使用转换格式字符串日期日期格式对应的日期格式查看表查看表删除表删除张表如果存在复制表实现表的复制表的数据也会同时存在将查询结果作为一张表来新建一个叫的表如果只想复制某一列两列的数据数据的增删改查查增删改字段字段表查询表中所有信息可读性差效率低先将转换为所有字段名带条件的查询字段取别名只是将查询结果显示为别名不影响表结构以上只是查询的时候是这个别名数据库中还是条件查询描述符号等于不等于或者小于小于等于大于大于等于两者之间为不为并且或者和同时出现有优先级问题的优先级比高包含模糊查询现在有一张员工表包含了员工编号姓名岗位部门上级领导编号创建日期薪资部门编号几个查询例子查询名字中带有的员工信息模糊查询匹配任意个字符一个字符一个下划线只匹配一个字符以结尾以开头名字第二个是名字第三个是查询薪资等于的员工的姓名和编号等于查询薪资不等于的员工的姓名和编号不等于或者语法查询薪资在到之间的员工姓名和编号区间查询字段为的员工姓名和编号为在数据库中不代表一个值而是一种状态表示啥都没有查询岗位是并且薪资大于的员工姓名和编号并且查询岗位是经理或者销售的员工姓名和编号或者查询岗位是经理和销售的员工姓名和编号包含这里代表只能是或者单行处理函数特点一个输入对应一个输出函数名描述转换小写转换大写取子串被截取字符串开始截取位置截取长度取长度去除首尾空格将字符串转换成日期将类型转换成类型将日期转换为指定日期的字符串将类型转换成类型设置千分位四舍五入数据保留几位小数表名生成随机数可以将转换成一个具体值数据初始化默认值字符串拼接数据拼接内容表名几个例子将查询员工名字转换为小写将查询员工名字的前位截取掉截取员工姓名的前位查询员工名字长度将员工薪资四舍五入保留位小数表名将查询员工名字都拼接上在所有数据库中所有的和数学运算结果都为避免这种情况需要使用数据被当做哪个值如果数据为的时候把这个数据当做哪个值分组函数多行处理特点多个输入对应一个输出函数名描述取得记录数求和取平均值取最大的数取最小的数注意在使用的时候必须先进行分组然后才可以使用如果没有对数据进行分组整张表默认为一组会自动忽略如果计算求和不需要提前使用做处理不能直接使用在语句中因为分组函数在使用的时候必须先分组多个分组函数可以组合一起使用薪资最高是多少所有薪资总和找出比最低工资还要高的员工信息错误示例多个分组函数一起使用分组函数案例在关键字后面只能跟参与分组的字段找出每个岗位的和按照岗位分组然后对工资求和以上执行顺序先从表中查询数据根据字段分组然后对每一组的数据进行求和找出每个部门的最高薪资按照部门编号分组找出每个部门不同岗位的最高薪资两个字段联合成一个字段看两个字段联合分组可以对分组后的数据进一步过滤只能和联合使用找出每个部门最高薪资大于的以上分组函数的使用效率低不如先过滤掉薪资大于的在进行分组再查询还有一种情况是实现不了的找出平均薪资大于的部门的平均薪资排序默认排序是升序指定降序单个字段排序查询工资指定降序多个字段排序查询员工和薪资要求薪资升序如果薪资一样再按照名字升序排列综合案例找出工资在到之间的员工要求按照薪资降序排列查询顺序总结语句执行顺序从某张表中查询数据先经过条件筛选出有价值的数据对这些有价值的数据进行分组分组之后使用进行过滤通过查询出来通过排序输出数据大综合案例找出每个岗位的平均薪资要求显示平均薪资大于的除了是之外的要求按照平均薪资降序排是将查询结果分一部分出来用于分页处理完整用法起始下标长度注意代表取前注意在之后使用通用分页规律按照薪资降序取出排名在前名的员工取出工资排名在名的员工合并集合将查询结果进行合并在进行结果集合并的时候要求两个结果集列数相同查询工作岗位是和的员工去除重复把查询结果去除重复记录不会修改数据库数据从员工表中查询去重后的岗位名称联合去重以上表示出现在两个字段之前表示两个字段联合起来去重统计岗位的数量连接查询从一张表中单独查询称为单表查询从多张表联合起来查数据称为连接查询表连接查询的分类内连接等值连接非等值连接自连接外连接左连接右连接全连接当两张表进行连接查询时没有任何条件的限制会发生什么现象被称为笛卡尔积现象查询每个员工所在部门名称以上没有使用条件限制最终查询的结果是两张表数据的乘积如何避免笛卡尔积现象连接时添加条件限制满足这个条件的记录才被筛选出来以上虽然查询的结果正确但是并没有减少匹配次数依然是笛卡尔积现象一个很关键的写法给表取别名结论表的连接次数越多效率越低尽量避免表的连接次数内连接等值连接内连接非等值连接内连接自连接外连接多表连接查询语法使用后面添加的是表和表连接的条件查询每个员工所在部门名称显示员工名和部门名语法语法薪资等级表找出每个员工的薪资等级要求显示员工名薪资薪资等级技巧一张表看成两张表将查询结果看成一张表自己连接自己一张表包含员工信息和上级信息将查询结果作为一张表员工名上级领导员工名上级领导技巧两张表使用外连接产生了主次关系外连接是找出两张表之间不符合条件的数据员工表部门表以上两张表没有一个员工是对应部门编号右连接将员工表和部门表中符合条件的数据筛选后在查询剩下的数据将右边的表看成是主表主要为了将这张表的数据全部查询顺便查询左边的表将左边的表看成是主表捎带右边的表进行条件筛选外连接的查询结果条数内连接的查询结果条数正确查询每个员工的上级领导要求显示所有员工的名字和领导名员工上级领导语法和的连接条件前一结果和的条件前一结果和的条件找出每个员工的部门名称以及工资等级要求显示员工名部门名薪资薪资等级员工名部门名薪资薪资等级员工名部门名薪资薪资等级子查询语句中嵌套语句被嵌套的语句称为子查询语法子句中出现子查询子句中出现子查询子句中出现子查询子句不可以出现分组函数错误正确找出最低工资排除最低工资的其他所有显示注意后面的子查询可以将子查询的查询结果当做一张临时表找出每个岗位的平均工资的薪资等级找出每个员工的部门名称要求显示员工名部门名插入一条记录表字段字段字段值值值表名的后面也可以省略字段名但是对应的地方要默认写全自动递增的字段需要用来占位插入多条记录表短日期默认格式长日期默认格式在中获取当前系统时间用并且获取的时间是长日期带有时分秒的时间表名条件注意没有条件限制会导致所有数据被删除表名字段值字段值字段值条件注意没有条件限制会导致所有数据被更新约束非空约束唯一性约束主键约束外键约束非空约束唯一性约束主键约束外键约束非空约束的字段不能为约束的字段不能重复可以为联合唯一性名字和邮箱联合起来唯一性使用场景密码可以一样但是密码和账号需要使用如果一个字段被和约束的话该字段自动变成主键字段主键值是每一行数据的唯一标识相当于每一行数据的身份证号建议主键值建议使用等类型一般都是定长的自然主键自动递增业务背景设计数据库表来描述班级和学生的信息第一种方式班级和学生放在同一张表张三武平县岩前镇岩前小学六年级班李四武平县岩前镇岩前小学六年级班王五武平县岩前镇岩前小学六年级班赵六武平县岩前镇岩前小学六年级班分析虽然能满足需求但是中重复数据太多占用太多空间第二种方式设计成两张表一张班级表一张学生表武平县岩前镇岩前小学六年级班武平县岩前镇岩前小学六年级班张三李四王五赵六通过学生表中的外键就可以从班级表中找到对应的班级注意一旦有外键就形成了父子关系有外键的那张表是子表注意外键值在父表中一定是主键值事务什么是事务一个事务是完整的业务逻辑也可以理解为批量的语句的同时成功或同时失败例如向转账账户的钱扣去账户的钱加上以上操作是最小的工作单元要么同时成功要么同时失败不可再分只有语句才有事务的说法提交事务执行命令清空事务性活动日志文件将数据全部彻底持久化到数据库中提交事务标志着事务的全部结束并且是一种全部成功的结束是默认自动提交事务并且数据持久化不可以执行回滚事务如果要关闭默认的自动提交事务需要在执行语句前先执行回滚事务执行命令将之前所有操作全部撤销并且清空事务性活动的日志文件回滚事务标志着事务的全部结束并且是一种全部失败的结束事务特性原子性说明事务是最小的工作单元不可再分一致性所有事务要求在同一个事务当中所有操作必须同时成功或者同时失败以保证数据的一致性隔离性事务和事务之间具有一定的隔离事务在操作一张表的时候另外一个事务也在操作这个表的时候是怎么样的多线程访问同一张表持久性事务提交相当于将没有保存到数据库中的数据保存进去事务隔离查看当前隔离级别设置隔离级别读未提交可重复读读已提交最低隔离级别事务可以读取到事务提交的数据存在脏读现象意思是指数据是不真实的模拟两个事务的操作先设置隔离级别为有一个空数据的表事务事务没有数据没有数据插入但未提交有一条数据没有数据事务开启后不管是多久在事务读取的数据都是一致的即使事务将数据已修改并且提交了事务读取到的数据还是没有发生改变这就是可重复读例如早上点开启了事务只要事务不结束到晚上点读取的数据还是没变化例如查询银行总账执行语句需要从下午点到下午点中间有人存取的钱不会影响数据事务事务这里查询是空数据这里查询是空数据有数据事务读取到了事务提交之后的数据解决了脏读现象这种隔离级别是比较真实的数据每一次读到的数据是绝对的真实事务事务这里查询是空数据这里查询是空数据有数据数据库三范式第一范式要求任何一张表都有主键每一个字段原子性不可再分第二范式建立在第一范式的基础之上要求所有非主键字段完全依赖主键不要产生部分依赖第三范式建立在第二范式的基础之上要求所有非主键字段直接依赖主键不要产生传递依赖一对多两张表多的表加外键多对多三张表关系表两个外键一对一外键唯一中使用安装单独创建一个工具方法文件引入创建连接池对数据库进行增删改查操作的基础方法连接池连接服务器的代码部署后需要改为内网而非外网运行的端口某个数据库数据库用户名数据库密码操作数据库方法调用上面的主要方法接收两个参数语句回调函数就是查询到的数据获取到数据需要使用到同步等待获取到数据再返回返回数据给前端',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-07-12 17:43:23',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.1.1"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">React</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://berniezwd.github.io/REACT_MARQUEE/" title="跑马灯"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/default_cover.jpg&quot;" data-lazy-src="/img/project/marquee.png" alt="跑马灯"/><span class="back-menu-item-text">跑马灯</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">有趣</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://berniezwd.github.io/PeopleJS/" title="人潮汹涌"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/default_cover.jpg&quot;" data-lazy-src="/img/project/people.png" alt="人潮汹涌"/><span class="back-menu-item-text">人潮汹涌</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">知瑾</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 即刻短文</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/default_cover.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/default_cover.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Docker/" style="font-size: 1.05rem; color: rgb(66, 135, 123);">Docker<sup>3</sup></a><a href="/tags/Html/" style="font-size: 1.05rem; color: rgb(89, 100, 38);">Html<sup>1</sup></a><a href="/tags/JavaScript/" style="font-size: 1.05rem; color: rgb(67, 103, 49);">JavaScript<sup>4</sup></a><a href="/tags/Jenkins%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/" style="font-size: 1.05rem; color: rgb(138, 79, 34);">Jenkins自动化部署<sup>1</sup></a><a href="/tags/Nginx/" style="font-size: 1.05rem; color: rgb(185, 172, 184);">Nginx<sup>1</sup></a><a href="/tags/Pinia/" style="font-size: 1.05rem; color: rgb(55, 60, 117);">Pinia<sup>1</sup></a><a href="/tags/React/" style="font-size: 1.05rem; color: rgb(106, 98, 19); font-weight: 500; color: var(--anzhiyu-lighttext)">React<sup>4</sup></a><a href="/tags/Redux/" style="font-size: 1.05rem; color: rgb(38, 86, 56);">Redux<sup>1</sup></a><a href="/tags/TypeScript/" style="font-size: 1.05rem; color: rgb(3, 82, 156); font-weight: 500; color: var(--anzhiyu-lighttext)">TypeScript<sup>1</sup></a><a href="/tags/Vue/" style="font-size: 1.05rem; color: rgb(45, 108, 169);">Vue<sup>2</sup></a><a href="/tags/axios/" style="font-size: 1.05rem; color: rgb(77, 174, 172);">axios<sup>1</sup></a><a href="/tags/centOS/" style="font-size: 1.05rem; color: rgb(120, 136, 43);">centOS<sup>1</sup></a><a href="/tags/css/" style="font-size: 1.05rem; color: rgb(152, 155, 117);">css<sup>2</sup></a><a href="/tags/electron/" style="font-size: 1.05rem; color: rgb(50, 157, 32);">electron<sup>1</sup></a><a href="/tags/koa/" style="font-size: 1.05rem; color: rgb(177, 114, 87);">koa<sup>1</sup></a><a href="/tags/mysql/" style="font-size: 1.05rem; color: rgb(166, 47, 102);">mysql<sup>1</sup></a><a href="/tags/nestjs/" style="font-size: 1.05rem; color: rgb(71, 15, 84);">nestjs<sup>1</sup></a><a href="/tags/node/" style="font-size: 1.05rem; color: rgb(21, 78, 86);">node<sup>1</sup></a><a href="/tags/sass/" style="font-size: 1.05rem; color: rgb(152, 136, 16);">sass<sup>1</sup></a><a href="/tags/uniapp/" style="font-size: 1.05rem; color: rgb(102, 115, 187); font-weight: 500; color: var(--anzhiyu-lighttext)">uniapp<sup>1</sup></a><a href="/tags/vim/" style="font-size: 1.05rem; color: rgb(68, 109, 59);">vim<sup>1</sup></a><a href="/tags/vite/" style="font-size: 1.05rem; color: rgb(93, 33, 12);">vite<sup>1</sup></a><a href="/tags/vue/" style="font-size: 1.05rem; color: rgb(85, 169, 150);">vue<sup>1</sup></a><a href="/tags/vue3/" style="font-size: 1.05rem; color: rgb(125, 157, 117);">vue3<sup>1</sup></a><a href="/tags/%E4%BA%91%E6%9C%8D%E5%8A%A1/" style="font-size: 1.05rem; color: rgb(31, 38, 159);">云服务<sup>1</sup></a><a href="/tags/%E5%8F%B3%E9%94%AEcmd/" style="font-size: 1.05rem; color: rgb(171, 45, 151);">右键cmd<sup>1</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7%E7%B1%BB/" style="font-size: 1.05rem; color: rgb(57, 41, 120);">工具类<sup>2</sup></a><a href="/tags/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" style="font-size: 1.05rem; color: rgb(61, 32, 87);">开发环境搭建<sup>1</sup></a><a href="/tags/%E6%96%87%E4%BB%B6%E8%B7%AF%E7%94%B1/" style="font-size: 1.05rem; color: rgb(58, 9, 113);">文件路由<sup>1</sup></a><a href="/tags/%E6%A0%87%E7%AD%BE%E5%A4%96%E6%8C%82/" style="font-size: 1.05rem; color: rgb(104, 105, 187);">标签外挂<sup>1</sup></a><a href="/tags/%E9%9B%B6%E6%95%A3/" style="font-size: 1.05rem; color: rgb(94, 194, 29);">零散<sup>1</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 1.05rem; color: rgb(101, 178, 148);">面试<sup>1</sup></a><a href="/tags/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA%E8%A7%84%E8%8C%83/" style="font-size: 1.05rem; color: rgb(112, 166, 173);">项目搭建规范<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">八月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/mysql/" itemprop="url">mysql</a></span></div></div><h1 class="post-title" itemprop="name headline">mysql</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2022-07-15T16:00:00.000Z" title="发表于 2022-07-16 00:00:00">2022-07-16</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-07-12T09:43:23.707Z" title="更新于 2023-07-12 17:43:23">2023-07-12</time></span></div><div class="meta-secondline"></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://s2.loli.net/2022/02/03/P3sHyhJj7IZTzlK.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2022/07/16/Mysql/"><header><a class="post-meta-categories" href="/categories/mysql/" itemprop="url">mysql</a><h1 id="CrawlerTitle" itemprop="name headline">mysql</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">知瑾</span><time itemprop="dateCreated datePublished" datetime="2022-07-15T16:00:00.000Z" title="发表于 2022-07-16 00:00:00">2022-07-16</time><time itemprop="dateCreated datePublished" datetime="2023-07-12T09:43:23.707Z" title="更新于 2023-07-12 17:43:23">2023-07-12</time></header><h1 id="简单介绍"><a href="#简单介绍" class="headerlink" title="简单介绍"></a>简单介绍</h1><p><strong>什么是数据库？什么是数据库管理系统？什么是SQL？他们之间的关系是什么？</strong></p>
<table>
<thead>
<tr>
<th>关键字</th>
<th>介绍</th>
</tr>
</thead>
<tbody><tr>
<td>数据库</td>
<td>DataBase简称<strong>DB</strong>，按照一定格式存储数据的一些文件的组合。</td>
</tr>
<tr>
<td>数据库管理系统</td>
<td>DataBaseManagement简称<strong>DBMS</strong>，是管理数据库中数据的，可以对数据进行增删改查的工具。</td>
</tr>
<tr>
<td>SQL</td>
<td>结构化查询语言，通过编写SQL语句，然后通过DBS负责执行SQL语句，完成对数据的增删改查操作。</td>
</tr>
<tr>
<td>关联</td>
<td>DBSM-&gt;执行SQl-&gt;操作DB</td>
</tr>
</tbody></table>
<p><strong>数据库中最基本的单元是：<code>表(table)</code> 用表格来表示数据，如下：</strong></p>
<table>
<thead>
<tr>
<th>name</th>
<th>sex</th>
<th>year</th>
</tr>
</thead>
<tbody><tr>
<td>张三</td>
<td>男</td>
<td>20</td>
</tr>
<tr>
<td>李四</td>
<td>女</td>
<td>18</td>
</tr>
<tr>
<td>王五</td>
<td>男</td>
<td>22</td>
</tr>
</tbody></table>
<p><strong>注意：</strong></p>
<ol>
<li>任何一张表都有<code>行(row)</code>和<code>列(column)</code></li>
<li>行：称为数据</li>
<li>列：称为字段</li>
<li>每个字段包含了：<code>字段名</code>,<code>数据类型</code>,<code>约束</code>等属性。（比如唯一性约束：姓名不能重复，id不能重复等）</li>
</ol>
<h2 id="SQL的语句分类"><a href="#SQL的语句分类" class="headerlink" title="SQL的语句分类"></a>SQL的语句分类</h2><table>
<thead>
<tr>
<th>分类</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>DQL-数据库查询语言</td>
<td>凡是带有<code>select</code>关键字的查询语句，都称为DQL语言。</td>
</tr>
<tr>
<td>DML-数据库操作语言</td>
<td>对数据操作的语句(<code>insert新增</code>,<code>delete删除</code>,<code>update更新</code>),都称为DML语言。</td>
</tr>
<tr>
<td>DDL-数据定义语言</td>
<td>对表结构操作的语句(<code>create新增</code>,<code>drop删除</code>,<code>alter修改</code>),都称为DDL语言。</td>
</tr>
<tr>
<td>TCL-事务语言</td>
<td>事务提交<code>commit</code>、事务回滚<code>rollback</code></td>
</tr>
<tr>
<td>DCl-数据控制语言</td>
<td>授权<code>grent</code>、撤销<code>revoke</code></td>
</tr>
</tbody></table>
<h2 id="常用基本命令："><a href="#常用基本命令：" class="headerlink" title="常用基本命令："></a>常用基本命令：</h2><p>sql文件中的数据导入：<code>source</code>+<code>sql文件路径</code>(路径中不要有中文、不要有空格)</p>
<p>查看数据库版本号？ <code>select version</code></p>
<p>终止当前当前命令的输入? <code>\c</code></p>
<p>查看表结构：<code>desc 表名</code>(包含字段名、字段类型等信息)</p>
<h1 id="Mac下安装-mysql"><a href="#Mac下安装-mysql" class="headerlink" title="Mac下安装 mysql"></a>Mac下安装 mysql</h1><p><strong>分为两个步骤：</strong></p>
<ol>
<li>使用安装包直接安装，下一步下一步直到安装成功就是了;</li>
<li>配置环境变量;</li>
</ol>
<p>打开个人盘符，找到<code>bash_profile</code>,添加以下环境变量配置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">mysql</span></span><br><span class="line">export PATH=$&#123;PATH&#125;:/usr/local/mysql/bin</span><br><span class="line">export PATH=$&#123;PATH&#125;:/usr/local/mysql/support-files</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>终端进入个人盘符，重新执行shell;</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/bash_profile</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>查看mysql是否安装成功;</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql --version</span><br></pre></td></tr></table></figure>


<h2 id="启动停止重启命令"><a href="#启动停止重启命令" class="headerlink" title="启动停止重启命令"></a>启动停止重启命令</h2><ol>
<li>先进入<code>mysql</code>安装路径下的<code>bin</code>目录;</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/mysql/bin/</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>登录管理员权限</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>输入对应的命令;</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动MySQL服务</span></span><br><span class="line">sudo /usr/local/MySQL/support-files/mysql.server start</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">停止MySQL服务</span></span><br><span class="line">sudo /usr/local/mysql/support-files/mysql.server stop</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重启MySQL服务</span></span><br><span class="line">sudo /usr/local/mysql/support-files/mysql.server restart</span><br></pre></td></tr></table></figure>

<h2 id="使用终端连接数据库"><a href="#使用终端连接数据库" class="headerlink" title="使用终端连接数据库"></a>使用终端连接数据库</h2><p>1.打开偏好设置，找到<code>mysql</code>,关闭<code>Mysql服务</code>,<code>Stop Mysql Srever</code></p>
<p>2.进入<code>mysql</code>安装目录下的<code>bin</code>目录;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/mysql/bin/</span><br></pre></td></tr></table></figure>

<p>3.登录管理员权限;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br></pre></td></tr></table></figure>

<p>4.禁用<code>mysql</code>验证密码功能(回车后会自动重启<code>mysql</code>，可以在偏好设置里看到<code>mysql</code>是<code>running</code>状态);</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./mysqld_safe --skip-grant-tables &amp;</span><br></pre></td></tr></table></figure>

<p>5.当前终端不关闭，新建一个终端窗口，进入<code>mysql</code>安装目录下的<code>bin</code>目录;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/mysql/bin/</span><br></pre></td></tr></table></figure>

<p>6.启动mysql数据库z;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./mysql</span><br></pre></td></tr></table></figure>

<p>7.如看到以下界面，代表数据库启动并且连接成功;</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/default_cover.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/02/03/aOtcKjCFXR2Hwqh.png" alt="image-20220203143417267"></p>
<p><strong>如果需要修改密码:</strong></p>
<p>8.冲刷特权,注意要加上分号;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

<p>9.设置新的密码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter user ‘root’@‘localhost’ identified with mysql_native_password by ‘你的新密码’;</span><br></pre></td></tr></table></figure>

<p>10.再次冲刷特权</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

<p>11.断开<code>mysql</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br></pre></td></tr></table></figure>

<p>12.再次打开终端</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/mysql/bin</span><br></pre></td></tr></table></figure>

<p>13.开启无密码登录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqladmin -u root -p shutdown</span><br></pre></td></tr></table></figure>

<p>14.然后重启<code>mysql</code>即可</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./mysql</span><br></pre></td></tr></table></figure>



<h1 id="库的基本操作"><a href="#库的基本操作" class="headerlink" title="库的基本操作"></a>库的基本操作</h1><div class="note primary no-icon flat"><p>1.操作数据库必须带分号<code>;</code>,否则不执行该命令；</p>
<p>2.不区分大小写；</p>
</div>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建数据库</span></span><br><span class="line">create database test;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除数据库</span></span><br><span class="line">drop database test;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">显示当前数据库</span></span><br><span class="line">show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">| test               |</span><br><span class="line">+--------------------+</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用指定数据库</span></span><br><span class="line">use test;</span><br></pre></td></tr></table></figure>

<h1 id="表的基本操作"><a href="#表的基本操作" class="headerlink" title="表的基本操作"></a>表的基本操作</h1><div class="note primary no-icon flat"><p>表操作的语句被称为DDl语句，包括<code>create</code>、<code>drop</code>、<code>alter</code></p>
<p>表的命名建议： <code>t_</code>或者<code>tab_</code>开始</p>
</div>

<h2 id="字段类型"><a href="#字段类型" class="headerlink" title="字段类型"></a>字段类型</h2><table>
<thead>
<tr>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>varchar</td>
<td>可变长度的字符串，根据字段长度动态分配空间（<code>缺点：效率低</code>）。</td>
</tr>
<tr>
<td>char</td>
<td>定长字符串，分配固定长度的空间去存储数据。（<code>使用不恰当，会导致空间的浪费</code>）</td>
</tr>
<tr>
<td>int</td>
<td>数字中的整数型。</td>
</tr>
<tr>
<td>bigint</td>
<td>数字中的长整型。</td>
</tr>
<tr>
<td>float</td>
<td>单精度浮点型数据。</td>
</tr>
<tr>
<td>double</td>
<td>双精度浮点型数据。</td>
</tr>
<tr>
<td>datetime</td>
<td>长日期（<code>包括时分秒 YYYY-MM-DD HH:mm:ss</code>）。</td>
</tr>
<tr>
<td>date</td>
<td>短日期（<code>YYYY-MM-DD</code>）。</td>
</tr>
<tr>
<td>text</td>
<td>字符大对象，最多4个g的字符串。</td>
</tr>
<tr>
<td>blob</td>
<td>二进制大对象，图片，视频等媒体数据（<code>插入数据的时候要用io流</code>）。</td>
</tr>
</tbody></table>
<div class="note danger no-icon flat"><p>varchar和char怎么选？</p>
<p>例如<code>性别字段</code>，固定长度的，所以选择char。</p>
<p>例如<code>姓名字段</code>，不固定长度，所以选择varchar。</p>
</div>

<h2 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h2><div class="note success no-icon flat"><p>create table 表名（</p>
<p>​	字段名1，数据类型，</p>
<p>​	字段名2，数据类型 default ‘默认值’，</p>
<p>​	字段名3，数据类型 comment ‘字段注释’</p>
<p>）</p>
</div>


<p>模拟建表：<code>t_movie</code> （要求包含的字段名：电影编号、电影名字、描述信息、上映时间、时长、海报图片）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table t_movie (</span><br><span class="line">  id int,</span><br><span class="line">  m_name varchar(255),</span><br><span class="line">  m_desc text,</span><br><span class="line">  m_onTime date,</span><br><span class="line">  m_long double</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<div class="note info disabled"><p>字段类型为<code>date</code>的时候，插入数据要使用<code>str_to_date</code>转换格式：str_to_date(‘字符串日期’, ‘日期格式’)</p>
</div>

<div class="note info disabled"><p>mysql对应的日期格式： <code>%Y-%m-%d %h:%i:%s</code></p>
</div>

<h2 id="查看表"><a href="#查看表" class="headerlink" title="查看表"></a>查看表</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看t_movie表;</span></span><br><span class="line">desc t_movie;</span><br><span class="line"></span><br><span class="line">+----------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type         | Null | Key | Default | Extra |</span><br><span class="line">+----------+--------------+------+-----+---------+-------+</span><br><span class="line">| id       | int(11)      | YES  |     | NULL    |       |</span><br><span class="line">| m_name   | varchar(255) | YES  |     | NULL    |       |</span><br><span class="line">| m_desc   | text         | YES  |     | NULL    |       |</span><br><span class="line">| m_onTime | date         | YES  |     | NULL    |       |</span><br><span class="line">| m_long   | double       | YES  |     | NULL    |       |</span><br><span class="line">+----------+--------------+------+-----+---------+-------+</span><br></pre></td></tr></table></figure>

<h2 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除t_movie张表（如果存在）；</span></span><br><span class="line">drop table if exists t_movie;</span><br></pre></td></tr></table></figure>

<h2 id="复制表"><a href="#复制表" class="headerlink" title="复制表"></a>复制表</h2><p><strong>实现表的复制，表的数据也会同时存在。</strong></p>
<p>create table t_user2 as select * from t_user;</p>
<p>将<code>select * from t_user</code>查询结果作为一张表来新建一个叫<code>t_user2</code>的表。</p>
<p><strong>如果只想复制某一列、两列的数据：</strong></p>
<p><code>create table t_user2 as select name,birth from t_user;</code></p>
<h1 id="数据的增删改查"><a href="#数据的增删改查" class="headerlink" title="数据的增删改查"></a>数据的增删改查</h1><div class="tabs" id=""><ul class="nav-tabs"><button type="button" class="tab  active" data-href="-1">查 select</button><button type="button" class="tab " data-href="-2">增 insert</button><button type="button" class="tab " data-href="-3">删 delete</button><button type="button" class="tab " data-href="-4">改 update</button></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><div class="note primary no-icon flat"><p>select 字段1,字段2 from 表；</p>
</div>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询表中所有信息 （可读性差、效率低、先将*转换为所有字段名）</span></span><br><span class="line">select * from t_user;</span><br><span class="line"></span><br><span class="line">+------+--------+------------+</span><br><span class="line">| id   | name   | birth      |</span><br><span class="line">+------+--------+------------+</span><br><span class="line">|    1 | bernie | 1998-10-16 |</span><br><span class="line">|    3 | Eho11  | 2000-12-12 |</span><br><span class="line">+------+--------+------------+</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">带条件的查询</span></span><br><span class="line">select id,name from t_user where id=3;</span><br><span class="line"></span><br><span class="line">+------+-------+</span><br><span class="line">| id   | name  |</span><br><span class="line">+------+-------+</span><br><span class="line">|    3 | Eho11 |</span><br><span class="line">+------+-------+</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">字段取别名（只是将查询结果显示为别名，不影响表结构）</span></span><br><span class="line">select id, name as nick_name from t_user;</span><br><span class="line"></span><br><span class="line">+------+-----------+</span><br><span class="line">| id   | nick_name |</span><br><span class="line">+------+-----------+</span><br><span class="line">|    1 | bernie    |</span><br><span class="line">|    3 | Eho11     |</span><br><span class="line">|    4 | zwd       |</span><br><span class="line">+------+-----------+</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">以上nick_name只是查询的时候是这个别名，数据库中还是name</span></span><br></pre></td></tr></table></figure>

<h2 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h2><table>
<thead>
<tr>
<th>描述</th>
<th>符号</th>
</tr>
</thead>
<tbody><tr>
<td>等于</td>
<td>&#x3D;</td>
</tr>
<tr>
<td>不等于</td>
<td>&lt;&gt; 或者 !&#x3D;</td>
</tr>
<tr>
<td>小于</td>
<td>&lt;</td>
</tr>
<tr>
<td>小于等于</td>
<td>&lt;&#x3D;</td>
</tr>
<tr>
<td>大于</td>
<td>&gt;</td>
</tr>
<tr>
<td>大于等于</td>
<td>&gt;&#x3D;</td>
</tr>
<tr>
<td>两者之间</td>
<td>between … and …</td>
</tr>
<tr>
<td>为null</td>
<td>is null</td>
</tr>
<tr>
<td>不为null</td>
<td>is not null</td>
</tr>
<tr>
<td>并且</td>
<td>and</td>
</tr>
<tr>
<td>或者</td>
<td>or</td>
</tr>
<tr>
<td>and和or同时出现</td>
<td>有优先级问题 and的优先级比or高</td>
</tr>
<tr>
<td>包含</td>
<td>in</td>
</tr>
<tr>
<td>模糊查询</td>
<td>like</td>
</tr>
</tbody></table>
<p>现在有一张员工表，包含了员工编号、姓名、岗位、部门、上级领导编号、创建日期、薪资、部门编号</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+-------+--------+-----------+------+---------------------+------+---------+--------+</span><br><span class="line">| empno | ename  | job       | mgr  | hiredata            | sal  | comm    | deptno |</span><br><span class="line">+-------+--------+-----------+------+---------------------+------+---------+--------+</span><br><span class="line">|  7369 | SMITH  | CLEAR     | 7902 | 1980-12-17 00:00:00 |  800 | NULL    |     20 |</span><br><span class="line">|  7499 | ALLEN  | SALEMAN   | 7698 | 1981-02-20 00:00:00 | 1600 | 300.00  |     30 |</span><br><span class="line">|  7521 | WARD   | SALEMAN   | 7696 | 1981-02-22 00:00:00 | 1250 | 500.00  |     30 |</span><br><span class="line">|  7566 | JONES  | MANAGER   | 7839 | 1981-04-22 00:00:00 | 2975 | NULL    |     20 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER   | 7839 | 1981-06-09 00:00:00 | 2850 | NULL    |     30 |</span><br><span class="line">|  7564 | MARTIN | SALEMAN   | 7698 | 1981-05-22 00:00:00 | 1425 | 1400.00 |     30 |</span><br><span class="line">|  7934 | FORD   | CLERK     | 7782 | 1982-10-22 00:00:00 | 1300 | NULL    |     10 |</span><br><span class="line">|  7902 | JAMES  | PRESIDENT | NULL | 1987-12-02 00:00:00 | 5000 | NULL    |     10 |</span><br><span class="line">|  7788 | SCOTT  | ANALYST   | 7566 | 1981-11-17 00:00:00 | 3000 | NULL    |     20 |</span><br><span class="line">+-------+--------+-----------+------+---------------------+------+---------+--------+</span><br></pre></td></tr></table></figure>



<div class="note success no-icon flat"><p><strong>几个select查询例子：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询名字中带有 S 的员工信息 -------模糊查询</span></span><br><span class="line">select * from emp where ename like &#x27;%S%&#x27;;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">%匹配任意个字符，_一个字符（一个下划线只匹配一个字符）</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">%t   ------ 以t结尾</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">%k   ------ 以k开头</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">_a%  ------ 名字第二个是a</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">__r% ------ 名字第三个是r</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询 薪资等于800的 员工的姓名和编号 -------等于</span></span><br><span class="line">select empno,ename from emp where sal = 800;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询 薪资不等于800 的员工的姓名和编号 -------不等于</span></span><br><span class="line">select empno,ename from emp where sal != 800;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或者 &lt;&gt;语法</span></span><br><span class="line">select empno,ename from emp where sal &lt;&gt; 800;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询 薪资在1250到2850 之间的员工姓名和编号 -------区间</span></span><br><span class="line">select empno, ename from emp where sal between 1250 and 2850;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询 <span class="built_in">comm</span>字段为null 的员工姓名和编号 ------- 为null</span></span><br><span class="line">select empno, ename from emp where comm is null;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在数据库中，null不代表一个值，而是一种状态，表示啥都没有</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询 岗位是MANAGER 并且薪资大于2500 的员工姓名和编号 -------并且</span></span><br><span class="line">select empno, ename from emp where job=&#x27;MANAGER&#x27; and sal&gt;2500;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询 岗位是经理或者销售 的员工姓名和编号 -------或者</span></span><br><span class="line">select empno,ename from emp where job = &#x27;manage&#x27; or job = &#x27;saleman&#x27;;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询 岗位是经理和销售 的员工姓名和编号 -------包含</span></span><br><span class="line">select empno, ename from emp where job in(&#x27;manage&#x27;,&#x27;saleman&#x27;);</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这里<span class="keyword">in</span>(<span class="string">&#x27;manage&#x27;</span>,<span class="string">&#x27;saleman&#x27;</span>)代表只能是manage或者saleman</span></span><br></pre></td></tr></table></figure>
</div>



<h2 id="单行处理函数"><a href="#单行处理函数" class="headerlink" title="单行处理函数"></a>单行处理函数</h2><div class="note info disabled"><p>特点：一个输入，对应一个输出</p>
</div>

<table>
<thead>
<tr>
<th>函数名</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>lower</td>
<td>转换小写</td>
</tr>
<tr>
<td>upper</td>
<td>转换大写</td>
</tr>
<tr>
<td>substr</td>
<td>取子串 <code>substring(被截取字符串， 开始截取位置, 截取长度)</code></td>
</tr>
<tr>
<td>length</td>
<td>取长度</td>
</tr>
<tr>
<td>trim</td>
<td>去除首尾空格</td>
</tr>
<tr>
<td>str_to_date</td>
<td>将字符串转换成日期，将varchar类型转换成date类型</td>
</tr>
<tr>
<td>date_format</td>
<td>将日期转换为指定日期的字符串 将date类型转换成varchar类型</td>
</tr>
<tr>
<td>format</td>
<td>设置千分位</td>
</tr>
<tr>
<td>round</td>
<td>四舍五入<code>select round(数据，保留几位小数) from 表名;</code></td>
</tr>
<tr>
<td>rand</td>
<td>生成随机数<code>select rand()*100 from emp</code></td>
</tr>
<tr>
<td>ifnull</td>
<td>可以将null转换成一个具体值 <code>ifnull(数据，初始化默认值)</code></td>
</tr>
<tr>
<td>concat</td>
<td>字符串拼接<code>select concat(数据,&#39;拼接内容&#39;) from 表名;</code></td>
</tr>
</tbody></table>
<div class="note info no-icon flat"><p><strong>几个例子</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将查询员工名字 转换为小写--------lower</span></span><br><span class="line">select lower(ename) as name from emp;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将查询员工名字的 前2位截取掉--------substr</span></span><br><span class="line">select substr(ename, 2) from emp;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">截取员工姓名的前2位--------substr</span></span><br><span class="line">select substr(ename, 1, 2) from emp;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询员工名字长度--------length</span></span><br><span class="line">select length(ename) from emp;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将员工薪资四舍五入保留2位小数--------round</span></span><br><span class="line">select round(sal，2) from 表名;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将查询员工名字 都拼接上 <span class="string">&#x27;-tounick&#x27;</span> --------concat</span></span><br><span class="line">select concat(ename, &#x27;-tounick&#x27;) as name from emp;</span><br></pre></td></tr></table></figure>

<p>在所有数据库中，所有的NULL和数学运算结果都为NULL，避免这种情况需要使用<code>ifnull</code></p>
<p><code>ifnull(数据，被当做哪个值)</code>：如果数据为NULL的时候，把这个数据当做哪个值</p>
<p><code>select ename,(sal+ifnull(comm, 0))*12 as yearsal from emp;</code></p>
</div>



<h2 id="分组函数（多行处理）"><a href="#分组函数（多行处理）" class="headerlink" title="分组函数（多行处理）"></a>分组函数（多行处理）</h2><div class="note success no-icon flat"><p>特点：多个输入，对应一个输出</p>
<p>select … from … group by …</p>
</div>

<table>
<thead>
<tr>
<th>函数名</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>count</td>
<td>取得记录数</td>
</tr>
<tr>
<td>sum</td>
<td>求和</td>
</tr>
<tr>
<td>avg</td>
<td>取平均值</td>
</tr>
<tr>
<td>max</td>
<td>取最大的数</td>
</tr>
<tr>
<td>min</td>
<td>取最小的数</td>
</tr>
</tbody></table>
<div class="note danger no-icon flat"><p><code>注意</code>: </p>
<p>1.在使用的时候，<code>必须先进行分组，然后才可以使用</code>(如果没有对数据进行分组，整张表默认为一组)。</p>
<p>2.会自动忽略<code>NULL</code>(如果计算求和，不需要提前使用ifnull做处理)。</p>
<p>3.不能直接使用在<code>where</code>语句中：（因为分组函数在使用的时候必须先分组）</p>
<p>4.多个分组函数可以组合一起使用</p>
</div>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">薪资最高是多少--------max</span></span><br><span class="line">select max(sal) from emp;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">所有薪资总和--------<span class="built_in">sum</span></span></span><br><span class="line">select sum(sal) from emp;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">找出比最低工资还要高的员工信息 --------错误示例</span></span><br><span class="line">select ename from emp where sal &gt; min(sal); # Error!!!!!</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">多个分组函数一起使用</span></span><br><span class="line">select sum(sal) as total,min(sal) as minSal,max(sal) as maxSal from emp;</span><br><span class="line">+-------+--------+--------+</span><br><span class="line">| total | minSal | maxSal |</span><br><span class="line">+-------+--------+--------+</span><br><span class="line">| 20200 |    800 |   5000 |</span><br><span class="line">+-------+--------+--------+</span><br></pre></td></tr></table></figure>

<p>分组函数案例：</p>
<p>在select关键字后面，只能跟参与分组的字段</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">找出每个岗位的和？（按照岗位分组，然后对工资求和）</span></span><br><span class="line">select job,sum(sal) from emp group by job;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">以上执行顺序：先从emp表中查询数据，根据job字段分组，然后对每一组的数据进行<span class="built_in">sum</span>求和。</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">找出每个部门的最高薪资？(按照部门编号分组)</span></span><br><span class="line">select deptno,max(sal) from emp group by deptno;</span><br><span class="line">+--------+----------+</span><br><span class="line">| deptno | max(sal) |</span><br><span class="line">+--------+----------+</span><br><span class="line">|     10 |     5000 |</span><br><span class="line">|     20 |     3000 |</span><br><span class="line">|     30 |     2850 |</span><br><span class="line">+--------+----------+</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">找出每个部门、不同岗位的最高薪资？(两个字段联合成一个字段看，两个字段联合分组)</span></span><br><span class="line">select deptno,job,max(sal) from emp group by deptno,job;</span><br></pre></td></tr></table></figure>

<p><code>having</code>可以对分组后的数据，进一步过滤。(只能和group by联合使用)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">找出每个部门最高薪资大于3000的？</span></span><br><span class="line">select deptno，max(sal) from emp group by deptno having sal &gt; 3000;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">以上分组函数的使用，效率低。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">不如先过滤掉薪资大于3000的，在进行分组，再查询。</span></span><br><span class="line">select deptno, max(sal) from emp where sal &gt; 3000 group by deptno;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">还有一种情况是<span class="built_in">where</span>实现不了的</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">找出平均薪资大于2500的部门的平均薪资？</span></span><br><span class="line">select deptno,avg(sal) as avgSal from emp group by deptno having avg(sal) &gt; 2500;</span><br></pre></td></tr></table></figure>

<h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><div class="note info no-icon flat"><p>默认排序是升序: <code>asc</code></p>
<p>指定降序：<code>desc</code></p>
</div>

<p>单个字段排序：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询工资，指定降序</span></span><br><span class="line">select ename,sal from emp order by sal desc;</span><br></pre></td></tr></table></figure>

<p>多个字段排序：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询员工和薪资，要求薪资升序，如果薪资一样，再按照名字升序排列？</span></span><br><span class="line">select empno, ename from emp order by sal asc, ename asc;</span><br></pre></td></tr></table></figure>

<p>综合案例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">找出工资在1250到3000之间的员工，要求按照薪资降序排列？</span></span><br><span class="line">select ename from emp where sal between 1250 and 3000 order by sal desc;</span><br></pre></td></tr></table></figure>

<h2 id="查询顺序总结"><a href="#查询顺序总结" class="headerlink" title="查询顺序总结"></a>查询顺序总结</h2><div class="note info no-icon flat"><p>语句：select … from … where … group by … having … order … limit …</p>
<p>执行顺序：from –&gt; where –&gt; group by –&gt; having –&gt; select –&gt; order by –&gt; limit</p>
<p>从某张表中查询数据：</p>
<p>1.先经过where条件筛选出有价值的数据</p>
<p>2.对这些有价值的数据进行分组</p>
<p>3.分组之后使用having进行过滤</p>
<p>4.通过select查询出来</p>
<p>5.通过排序输出数据</p>
</div>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">大综合案例</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">找出每个岗位的平均薪资，要求显示平均薪资大于1500的，除了job是MANAGER之外的，要求按照平均薪资降序排？</span></span><br><span class="line">select job,avg(sal) as avgSal from emp where job&lt;&gt;&quot;MANAGER&quot; group by job having avg(sal) &gt; 1500  order by avgSal desc;</span><br></pre></td></tr></table></figure>

<h2 id="limit"><a href="#limit" class="headerlink" title="limit"></a>limit</h2><div class="note info no-icon flat"><p>limit是将查询结果分一部分出来，用于分页处理。</p>
<p><code>完整用法</code>：limit(起始下标0， length长度)</p>
<p><code>注意</code>:limit 5代表取前5</p>
<p><code>注意</code>:limit在order by之后使用</p>
<p><code>通用分页规律</code>:limit((pageNo - 1)*pageSize, pageSize)</p>
</div>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">按照薪资降序，取出排名在前5名的员工？</span></span><br><span class="line">select ename from emp order by sal desc limit 5;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">取出工资排名在[3-5]名的员工？</span></span><br><span class="line">select ename from emp order by sal desc limit(2, 3);</span><br></pre></td></tr></table></figure>



<h2 id="union合并集合"><a href="#union合并集合" class="headerlink" title="union合并集合"></a>union合并集合</h2><div class="note info no-icon flat"><p>将查询结果进行合并</p>
<p>union在进行结果集合并的时候，要求两个结果集列数相同。</p>
</div>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询工作岗位是<span class="string">&#x27;MANAGE&#x27;</span>和<span class="string">&#x27;SALEMAN&#x27;</span>的员工？</span></span><br><span class="line">select ename,job from emp where job = &#x27;MANAGE&#x27; union select ename,job from emp where job = &#x27;SALEMAN&#x27;;</span><br></pre></td></tr></table></figure>



<h2 id="distinct去除重复"><a href="#distinct去除重复" class="headerlink" title="distinct去除重复"></a>distinct去除重复</h2><div class="note info no-icon flat"><p>把查询结果去除重复记录，不会修改数据库数据。</p>
</div>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">从员工表中查询去重后的岗位名称</span></span><br><span class="line">select distinct job from emp;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">联合去重</span></span><br><span class="line">select distinct ename,job from emp; </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">以上表示：distinect出现在ename，job两个字段之前，表示两个字段联合起来去重；</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">统计岗位的数量？</span></span><br><span class="line">select count(distinct job) as jobNum from emp;</span><br></pre></td></tr></table></figure>



<h2 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h2><div class="note info no-icon flat"><p>从一张表中单独查询，称为单表查询。</p>
<p>从多张表联合起来查数据，称为连接查询。</p>
</div>

<p>表连接查询的分类：</p>
<ol>
<li>内连接<ol>
<li>等值连接</li>
<li>非等值连接</li>
<li>自连接</li>
</ol>
</li>
<li>外连接<ol>
<li>左连接</li>
<li>右连接</li>
</ol>
</li>
<li>全连接</li>
</ol>
<div class="note danger no-icon flat"><p>当两张表进行连接查询时，没有任何条件的限制会发生什么现象？（被称为<code>笛卡尔积现象</code>）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询每个员工所在部门名称？</span></span><br><span class="line">select ename, dname from emp, dept;</span><br></pre></td></tr></table></figure>

<p>以上 没有使用条件限制，最终查询的结果是两张表数据的乘积。</p>
<p>如何避免<code>笛卡尔积现象</code></p>
<p>连接时添加条件限制，满足这个条件的记录才被筛选出来。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select ename, dname from emp,dept where emp.deptno = dept.deptno;</span><br></pre></td></tr></table></figure>

<p>以上 虽然查询的结果正确，但是并没有减少匹配次数，依然是笛卡尔积现象。</p>
<p>一个很关键的写法，给表取别名</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select e.ename, d.dname from emp e, dept d where e.deptno = d.deptno;</span><br></pre></td></tr></table></figure>

<p>结论：表的连接次数越多，效率越低，尽量避免表的连接次数。</p>
</div>

<div class="tabs" id=""><ul class="nav-tabs"><button type="button" class="tab  active" data-href="-1">内连接-等值连接</button><button type="button" class="tab " data-href="-2">内连接-非等值连接</button><button type="button" class="tab " data-href="-3">内连接-自连接</button><button type="button" class="tab " data-href="-4">外连接</button><button type="button" class="tab " data-href="-5">多表连接查询</button></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><p>99语法使用<code>join on</code></p>
<p><code>on</code>后面添加的是：e表和d表连接的条件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询每个员工所在部门名称，显示员工名和部门名？</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">92语法</span></span><br><span class="line">select e.ename, d.dname from emp e, dept d where e.deptno = d.deptno;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">99语法</span></span><br><span class="line">select e.ename, d.dname from emp e join dept d on e.deptno = d.deptno;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="-2"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">薪资等级表salgrade</span></span><br><span class="line">+-------+-------+-------+</span><br><span class="line">| grade | losal | hisal |</span><br><span class="line">+-------+-------+-------+</span><br><span class="line">| 1     | 700   | 1200  |</span><br><span class="line">| 2     | 1201  | 1400  |</span><br><span class="line">| 5     | 3001  | 9999  |</span><br><span class="line">| 3     | 1401  | 2000  |</span><br><span class="line">| 4     | 2001  | 3001  |</span><br><span class="line">+-------+-------+-------+</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">找出每个员工的薪资等级，要求显示员工名，薪资，薪资等级？</span></span><br><span class="line">select </span><br><span class="line">  e.ename,</span><br><span class="line">  e.sal,</span><br><span class="line">  s.grade </span><br><span class="line">from </span><br><span class="line">  emp e </span><br><span class="line">join </span><br><span class="line">  salgrade s </span><br><span class="line">on </span><br><span class="line">  e.sal between s.local and s.hisal;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="-3"><div class="note info no-icon flat"><p><code>技巧</code>：一张表看成两张表</p>
<p>将查询结果看成一张表，自己连接自己。</p>
</div>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">一张表包含员工信息和上级信息</span></span><br><span class="line">select empno,ename,mgr from emp;</span><br><span class="line">+-------+--------+------+</span><br><span class="line">| empno | ename  | mgr  |</span><br><span class="line">+-------+--------+------+</span><br><span class="line">|  7369 | SMITH  | 7902 |</span><br><span class="line">|  7499 | ALLEN  | 7698 |</span><br><span class="line">|  7521 | WARD   | 7696 |</span><br><span class="line">|  7698 | BLAKE  | 7839 |</span><br><span class="line">|  7566 | JONES  | 7839 |</span><br><span class="line">|  7698 | BLAKE  | 7839 |</span><br><span class="line">|  7564 | MARTIN | 7698 |</span><br><span class="line">|  7934 | FORD   | 7782 |</span><br><span class="line">|  7902 | JAMES  | NULL |</span><br><span class="line">|  7788 | SCOTT  | 7566 |</span><br><span class="line">+-------+--------+------+</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将查询结果作为一张表</span></span><br><span class="line">select a.ename as &#x27;员工名&#x27;, b.ename as &#x27;上级领导&#x27; from emp a join emp b on a.mgr = b.empno;</span><br><span class="line">+-----------+--------------+</span><br><span class="line">| 员工名    | 上级领导       |</span><br><span class="line">+-----------+--------------+</span><br><span class="line">| SCOTT     | JONES        |</span><br><span class="line">| ALLEN     | BLAKE        |</span><br><span class="line">| MARTIN    | BLAKE        |</span><br><span class="line">| SMITH     | JAMES        |</span><br><span class="line">+-----------+--------------+</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="-4"><div class="note info no-icon flat"><p><code>技巧</code>：两张表使用外连接，产生了主次关系。</p>
<p>外连接是找出两张表之间不符合条件的数据。</p>
</div>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">员工表 emp</span></span><br><span class="line">+-------+--------+-----------+------+---------------------+---------+---------+--------+</span><br><span class="line">| empno | ename  | job       | mgr  | hiredata            | sal     | comm    | deptno |</span><br><span class="line">+-------+--------+-----------+------+---------------------+---------+---------+--------+</span><br><span class="line">|  7369 | SMITH  | CLEAR     | 7902 | 1980-12-17 00:00:00 | 800.00  | NULL    |     20 |</span><br><span class="line">|  7499 | ALLEN  | SALEMAN   | 7698 | 1981-02-20 00:00:00 | 1600.00 | 300.00  |     30 |</span><br><span class="line">|  7521 | WARD   | SALEMAN   | 7696 | 1981-02-22 00:00:00 | 1250.00 | 500.00  |     30 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER   | 7839 | 1981-06-09 00:00:00 | 2850.00 | NULL    |     30 |</span><br><span class="line">|  7566 | JONES  | MANAGER   | 7839 | 1981-04-22 00:00:00 | 2975.00 | NULL    |     20 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER   | 7839 | 1981-06-09 00:00:00 | 2850.00 | NULL    |     30 |</span><br><span class="line">|  7564 | MARTIN | SALEMAN   | 7698 | 1981-05-22 00:00:00 | 1425.00 | 1400.00 |     30 |</span><br><span class="line">|  7934 | FORD   | CLERK     | 7782 | 1982-10-22 00:00:00 | 1300.00 | NULL    |     10 |</span><br><span class="line">|  7902 | JAMES  | PRESIDENT | NULL | 1987-12-02 00:00:00 | 5000.00 | NULL    |     10 |</span><br><span class="line">|  7788 | SCOTT  | ANALYST   | 7566 | 1981-11-17 00:00:00 | 3000.00 | NULL    |     20 |</span><br><span class="line">+-------+--------+-----------+------+---------------------+---------+---------+--------+</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">部门表 dept</span></span><br><span class="line">+--------+------------+----------+</span><br><span class="line">| deptno | dname      | loc      |</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">|     20 | RESEARCH   | DALLAS   |</span><br><span class="line">|     30 | SALES      | CHICAGO  |</span><br><span class="line">|     10 | ACCOUNTING | NEW YORK |</span><br><span class="line">|     40 | OPERATIONS | BOSTON   |</span><br><span class="line">+--------+------------+----------+</span><br></pre></td></tr></table></figure>

<p>以上两张表，没有一个员工是对应部门编号40：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">select e.ename,d.dname from emp e right jion dept d on e.deptno = d.deptno;</span><br><span class="line">+--------+------------+</span><br><span class="line">| ename  | dname      |</span><br><span class="line">+--------+------------+</span><br><span class="line">| SMITH  | RESEARCH   |</span><br><span class="line">| ALLEN  | SALES      |</span><br><span class="line">| WARD   | SALES      |</span><br><span class="line">| JONES  | RESEARCH   |</span><br><span class="line">| BLAKE  | SALES      |</span><br><span class="line">| MARTIN | SALES      |</span><br><span class="line">| FORD   | ACCOUNTING |</span><br><span class="line">| JAMES  | ACCOUNTING |</span><br><span class="line">| SCOTT  | RESEARCH   |</span><br><span class="line">| NULL   | OPERATIONS |</span><br><span class="line">+--------+------------+</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">右连接：将员工表和部门表中符合on条件的数据筛选后，在查询剩下的数据。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">right: 将右边的表看成是主表，主要为了将这张表的数据全部查询，顺便查询左边的表。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">left：将左边的表看成是主表，捎带右边的表进行条件筛选。</span></span><br></pre></td></tr></table></figure>

<p>外连接的查询结果条数 &gt;&#x3D; 内连接的查询结果条数？ ：正确</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询每个员工的上级领导，要求显示所有员工的名字和领导名？</span></span><br><span class="line">select a.ename as &#x27;员工&#x27;, b.ename as &#x27;上级领导&#x27; from emp a left join emp b on a.mgr = b.empno;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="-5"><div class="note info no-icon flat"><p><code>语法</code>：select … from a join b on a和b的连接条件 join c on 前一结果和c的条件 join d on 前一结果和c的条件</p>
</div>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">找出每个员工的部门名称以及工资等级，要求显示员工名，部门名，薪资，薪资等级？</span></span><br><span class="line">select </span><br><span class="line">  e.ename as &#x27;员工名&#x27;,</span><br><span class="line">  d.dname as &#x27;部门名&#x27;,</span><br><span class="line">  e.sal as &#x27;薪资&#x27;,</span><br><span class="line">  s.grade as &#x27;薪资等级&#x27;</span><br><span class="line">from </span><br><span class="line">  emp e</span><br><span class="line">left join</span><br><span class="line">  dept d</span><br><span class="line">on</span><br><span class="line">  e.deptno = d.deptno</span><br><span class="line">left join</span><br><span class="line">  salgrade s</span><br><span class="line">on</span><br><span class="line">  e.sal between s.losal and s.hisal;</span><br><span class="line">+-----------+------------+--------+--------------+</span><br><span class="line">| 员工名    | 部门名     | 薪资   | 薪资等级     |</span><br><span class="line">+-----------+------------+--------+--------------+</span><br><span class="line">| SMITH     | RESEARCH   |    800 | 1            |</span><br><span class="line">| WARD      | SALES      |   1250 | 2            |</span><br><span class="line">| FORD      | ACCOUNTING |   1300 | 2            |</span><br><span class="line">| JAMES     | ACCOUNTING |   5000 | 5            |</span><br><span class="line">| ALLEN     | SALES      |   1600 | 3            |</span><br><span class="line">| MARTIN    | SALES      |   1425 | 3            |</span><br><span class="line">| JONES     | RESEARCH   |   2975 | 4            |</span><br><span class="line">| SCOTT     | RESEARCH   |   3000 | 4            |</span><br><span class="line">| BLAKE     | SALES      |   2850 | 4            |</span><br><span class="line">+-----------+------------+--------+--------------+</span><br></pre></td></tr></table></figure></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>

<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><div class="note primary no-icon flat"><p>select语句中嵌套select语句，被嵌套的语句称为子查询。</p>
<p><code>语法</code>：select …(select) from …(select) where …(select)</p>
</div>

<div class="tabs" id=""><ul class="nav-tabs"><button type="button" class="tab  active" data-href="-1">where子句中出现子查询</button><button type="button" class="tab " data-href="-2">from子句中出现子查询</button><button type="button" class="tab " data-href="-3">select子句中出现子查询</button></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><p>where子句不可以出现分组函数</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">错误</span></span><br><span class="line">select e.ename,e.sal from emp where sal &gt; min(sal)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">正确</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1.找出最低工资</span></span><br><span class="line">select min(sal) from emp;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2.排除最低工资的 其他所有显示</span></span><br><span class="line">select e.ename,e.sal from emp e where e.sal &gt; (select min(sal) from emp);</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="-2"><div class="note primary no-icon flat"><p><code>注意</code>：from后面的子查询，可以将子查询的查询结果当做一张临时表。</p>
</div>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">找出每个岗位的平均工资的薪资等级</span></span><br><span class="line">select </span><br><span class="line">  t.*,</span><br><span class="line">  s.grade </span><br><span class="line">from </span><br><span class="line">  (select job,avg(sal) as avgsal from emp group by job) t </span><br><span class="line">join </span><br><span class="line">  salgrade s </span><br><span class="line">on </span><br><span class="line">  t.avgsal between s.losal and s.hisal;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="-3"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">找出每个员工的部门名称，要求显示员工名，部门名？</span></span><br><span class="line">select </span><br><span class="line">  e.ename,</span><br><span class="line">  (select d.dname from dept as d where e.deptno = d.deptno) as dname </span><br><span class="line">from </span><br><span class="line">  emp e;</span><br></pre></td></tr></table></figure></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div></div><div class="tab-item-content" id="-2"><div class="note primary no-icon flat"><p>插入一条记录：insert into 表(字段1，字段2，字段3…) values (值1，值2，值3…);</p>
</div>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">insert into t_user(id, name, birth) values(1, &#x27;bernie&#x27;, &#x27;1998-10-16&#x27;);</span><br><span class="line"></span><br><span class="line">+------+--------+------------+</span><br><span class="line">| id   | name   | birth      |</span><br><span class="line">+------+--------+------------+</span><br><span class="line">|    1 | bernie | 1998-10-16 |</span><br><span class="line">+------+--------+------------+</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">表名的后面也可以省略字段名，但是values对应的地方要默认写全，自动递增的字段需要用 NULL 来占位</span></span><br></pre></td></tr></table></figure>

<div class="note primary no-icon flat"><p>插入多条记录：insert into 表 values(),(),(),()…；</p>
</div>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">insert into t_user values(2, &#x27;Jack&#x27;, &#x27;2000--01-12&#x27;),(3, &#x27;Echo&#x27;, &#x27;1993--05-12&#x27;);</span><br><span class="line"></span><br><span class="line">+------+--------+------------+</span><br><span class="line">| id   | name   | birth      |</span><br><span class="line">+------+--------+------------+</span><br><span class="line">|    1 | bernie | 1998-10-16 |</span><br><span class="line">|    2 | Jack   | 2000-01-12 |</span><br><span class="line">|    3 | Echo   | 1993-05-12 |</span><br><span class="line">+------+--------+------------+</span><br></pre></td></tr></table></figure>

<p>mysql短日期默认格式：%Y-%m-%d；长日期默认格式 %Y-%m-%d %h-%i-%s</p>
<p>在mysql中获取当前系统时间用<code>now()</code>，并且获取的时间是长日期，带有时分秒的时间。</p>
<p><code>insert into t_user(id, name, birth) values(4, &#39;zwd&#39;, now());</code></p></div><div class="tab-item-content" id="-3"><div class="note primary no-icon flat"><p>delete from 表名 where 条件;</p>
<p><code>注意</code>：没有where条件限制会导致 所有数据被删除；</p>
</div>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">delete from t_user where id = 2;</span><br><span class="line"></span><br><span class="line">+------+--------+------------+</span><br><span class="line">| id   | name   | birth      |</span><br><span class="line">+------+--------+------------+</span><br><span class="line">|    1 | bernie | 1998-10-16 |</span><br><span class="line">|    3 | Echo   | 1993-05-12 |</span><br><span class="line">+------+--------+------------+</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="-4"><div class="note primary no-icon flat"><p>update 表名 set 字段1&#x3D;值,字段2&#x3D;值,字段3&#x3D;值 where条件;</p>
<p><code>注意</code>：没有where条件限制会导致 所有数据被更新；</p>
</div>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">update t_user set name=&#x27;Eho11&#x27;,birth=&#x27;2000-12-12&#x27; where id=3;</span><br><span class="line"></span><br><span class="line">+------+--------+------------+</span><br><span class="line">| id   | name   | birth      |</span><br><span class="line">+------+--------+------------+</span><br><span class="line">|    1 | bernie | 1998-10-16 |</span><br><span class="line">|    3 | Eho11  | 2000-12-12 |</span><br><span class="line">+------+--------+------------+</span><br></pre></td></tr></table></figure></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>



<h2 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h2><ul>
<li>非空约束 not null</li>
<li>唯一性约束 unique</li>
<li>主键约束 primary key</li>
<li>外键约束 foreign key</li>
</ul>
<div class="tabs" id=""><ul class="nav-tabs"><button type="button" class="tab  active" data-href="-1">非空约束</button><button type="button" class="tab " data-href="-2">唯一性约束</button><button type="button" class="tab " data-href="-3">主键约束</button><button type="button" class="tab " data-href="-4">外键约束</button></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><p>非空约束的字段不能为NULL</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table t_vip (</span><br><span class="line">  id int,</span><br><span class="line">  name varchar(255) not null</span><br><span class="line">)</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="-2"><p>约束的字段不能重复，可以为NULL</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table t_vip(</span><br><span class="line">  id int,</span><br><span class="line">  name varchar(255) unique</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>联合唯一性：名字和邮箱联合起来唯一性：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table t_vip(</span><br><span class="line">	id int,</span><br><span class="line">	name varchar(255),</span><br><span class="line">	email varchar(255),</span><br><span class="line">	unique(name, email)</span><br><span class="line">)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用场景 密码可以一样，但是密码和账号需要使用unique</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="-3"><p>如果一个字段被<code>no null</code>和<code>unique</code>约束的话，该字段自动变成主键字段。</p>
<p>主键值是每一行数据的唯一标识，相当于每一行数据的身份证号。</p>
<p>建议：主键值建议使用 int bigint char等类型，一般都是定长的</p>
<p>自然主键自动递增： auto_increment</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table t_vip(</span><br><span class="line">  id int primary key auto_increment,</span><br><span class="line">  name varchar(255)</span><br><span class="line">)</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="-4"><p>业务背景：设计数据库表，来描述班级和学生的信息？</p>
<p>第一种方式：班级和学生放在同一张表</p>
<table>
<thead>
<tr>
<th>no</th>
<th>student_name</th>
<th>Class_name</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>张三</td>
<td>武平县岩前镇岩前小学六年级1班</td>
</tr>
<tr>
<td>2</td>
<td>李四</td>
<td>武平县岩前镇岩前小学六年级1班</td>
</tr>
<tr>
<td>3</td>
<td>王五</td>
<td>武平县岩前镇岩前小学六年级2班</td>
</tr>
<tr>
<td>4</td>
<td>赵六</td>
<td>武平县岩前镇岩前小学六年级2班</td>
</tr>
</tbody></table>
<p>分析：虽然能满足需求，但是<code>class_name</code>中重复数据太多，占用太多空间。</p>
<p>第二种方式：设计成两张表，一张班级表<code>t_class</code>、一张学生表<code>t_student</code></p>
<p>t_class</p>
<table>
<thead>
<tr>
<th>cno(pk)</th>
<th>class_name</th>
</tr>
</thead>
<tbody><tr>
<td>100</td>
<td>武平县岩前镇岩前小学六年级1班</td>
</tr>
<tr>
<td>1001</td>
<td>武平县岩前镇岩前小学六年级2班</td>
</tr>
</tbody></table>
<p>t_student</p>
<table>
<thead>
<tr>
<th>no(pk)</th>
<th>Student_name</th>
<th>cno(fk)</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>张三</td>
<td>100</td>
</tr>
<tr>
<td>2</td>
<td>李四</td>
<td>100</td>
</tr>
<tr>
<td>3</td>
<td>王五</td>
<td>101</td>
</tr>
<tr>
<td>4</td>
<td>赵六</td>
<td>101</td>
</tr>
</tbody></table>
<p>通过学生表中的外键cno就可以从班级表中找到对应的班级。</p>
<p><code>注意：</code>一旦有外键，就形成了父子关系，有外键的那张表是子表。</p>
<p><code>注意：</code>外键值在父表中一定是主键值。</p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>



<h1 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h1><p>什么是事务？</p>
<p>一个事务是完整的业务逻辑。也可以理解为批量的DML语句的同时成功或同时失败</p>
<p>例如：</p>
<p>A向B转账1w</p>
<p>A账户的钱扣去1w（update）</p>
<p>B账户的钱加上1w（update）</p>
<p>以上操作是最小的工作单元，要么同时成功，要么同时失败，不可再分。</p>
<div class="note primary no-icon flat"><p>只有DML语句才有事务的说法，<code>insert</code>、<code>update</code>、<code>delete</code></p>
</div>



<h2 id="提交事务："><a href="#提交事务：" class="headerlink" title="提交事务："></a>提交事务：</h2><p>执行命令：<code>commit;</code></p>
<p>清空事务性活动日志文件，将数据全部彻底持久化到数据库中。</p>
<p>提交事务标志着事务的全部结束，并且是一种全部成功的结束。</p>
<p>mysql是默认自动提交事务，并且数据持久化,不可以执行回滚事务。</p>
<p>如果要关闭默认的自动提交事务，需要在执行DML语句前先执行<code>start transaction</code></p>
<h2 id="回滚事务："><a href="#回滚事务：" class="headerlink" title="回滚事务："></a>回滚事务：</h2><p>执行命令：<code>rollback;</code></p>
<p>将之前所有DML操作全部撤销，并且清空事务性活动的日志文件。</p>
<p>回滚事务标志着事务的全部结束，并且是一种全部失败的结束。</p>
<h2 id="事务特性："><a href="#事务特性：" class="headerlink" title="事务特性："></a>事务特性：</h2><p>原子性：说明事务是最小的工作单元，不可再分。</p>
<p>一致性：所有事务要求，在同一个事务当中，所有操作必须同时成功，或者同时失败，以保证数据的一致性。</p>
<p>隔离性：A事务和B事务之间具有一定的隔离。A事务在操作一张表的时候，另外一个事务B也在操作这个表的时候，是怎么样的？多线程访问同一张表。</p>
<p>持久性：事务提交，相当于将没有保存到数据库中的数据保存进去。</p>
<h2 id="事务隔离："><a href="#事务隔离：" class="headerlink" title="事务隔离："></a>事务隔离：</h2><p>查看当前隔离级别：<code>select @@tx_isolation;</code></p>
<p>设置隔离级别：<code>set global transaction isolation level read uncommitted;</code></p>
<div class="tabs" id=""><ul class="nav-tabs"><button type="button" class="tab  active" data-href="-1">读未提交</button><button type="button" class="tab " data-href="-2">可重复读</button><button type="button" class="tab " data-href="-3">读已提交</button></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><p>read uncommitted（最低隔离级别）</p>
<p>事务A可以读取到事务B提交的数据，存在脏读现象，意思是指数据是不真实的。</p>
<p>模拟两个事务的操作，先设置隔离级别为<code>read uncommitted</code></p>
<p>有一个空数据的表<code>t_user</code></p>
<table>
<thead>
<tr>
<th>事务A</th>
<th>事务B</th>
</tr>
</thead>
<tbody><tr>
<td>start transaction;</td>
<td>start transaction;</td>
</tr>
<tr>
<td>select * from t_user;（<code>没有数据</code>）</td>
<td>select * from t_user;（<code>没有数据</code>）</td>
</tr>
<tr>
<td></td>
<td>Insert into t_user values(‘bernie’)(<code>插入但未提交</code>)</td>
</tr>
<tr>
<td>select * from t_user;（<code>有一条数据</code>）</td>
<td></td>
</tr>
<tr>
<td></td>
<td>rollback;</td>
</tr>
<tr>
<td>select * from t_user;（<code>没有数据</code>）</td>
<td></td>
</tr>
</tbody></table></div><div class="tab-item-content" id="-2"><p>repeatable read</p>
<p>事务A开启后，不管是多久，在事务A读取的数据都是一致的，即使事务B将数据已修改，并且提交了，事务A读取到的数据还是没有发生改变，这就是可重复读。</p>
<p>例如：早上9点开启了事务，只要事务不结束，到晚上9点读取的数据还是没变化。</p>
<p>例如：查询银行总账，执行DML语句，需要从下午1点到下午3点，中间有人存取的钱不会影响数据。</p>
<table>
<thead>
<tr>
<th>事务A</th>
<th>事务B</th>
</tr>
</thead>
<tbody><tr>
<td>start transaction;</td>
<td>start transaction;</td>
</tr>
<tr>
<td>select * from t_user;<code>(这里查询是空数据) </code></td>
<td>insert into t_user values(‘bernie’);</td>
</tr>
<tr>
<td>select * from t_user;<code>(这里查询是空数据) </code></td>
<td></td>
</tr>
<tr>
<td></td>
<td>commit;</td>
</tr>
<tr>
<td>select * from t_user;（有数据）</td>
<td></td>
</tr>
</tbody></table></div><div class="tab-item-content" id="-3"><p>事务A读取到了事务B提交之后的数据，解决了脏读现象。</p>
<p>这种隔离级别是比较真实的数据，每一次读到的数据是绝对的真实。</p>
<table>
<thead>
<tr>
<th>事务A</th>
<th>事务B</th>
</tr>
</thead>
<tbody><tr>
<td>start transaction;</td>
<td>start transaction;</td>
</tr>
<tr>
<td>select * from t_user;<code>(这里查询是空数据) </code></td>
<td>insert into t_user values(‘bernie’);</td>
</tr>
<tr>
<td>select * from t_user;<code>(这里查询是空数据) </code></td>
<td></td>
</tr>
<tr>
<td></td>
<td>commit;</td>
</tr>
<tr>
<td>select * from t_user;（有数据）</td>
<td></td>
</tr>
</tbody></table></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>



<h1 id="数据库三范式"><a href="#数据库三范式" class="headerlink" title="数据库三范式"></a>数据库三范式</h1><ol>
<li>第一范式：要求任何一张表都有主键，每一个字段原子性不可再分。</li>
<li>第二范式：建立在第一范式的基础之上，要求所有非主键字段完全依赖主键，不要产生部分依赖。</li>
<li>第三范式：建立在第二范式的基础之上，要求所有非主键字段直接依赖主键，不要产生传递依赖。</li>
<li>一对多：两张表，多的表加外键</li>
<li>多对多：三张表，关系表两个外键</li>
<li>一对一：外键唯一(foreign + unique)</li>
</ol>
<h2 id="Koa中使用mysql"><a href="#Koa中使用mysql" class="headerlink" title="Koa中使用mysql"></a>Koa中使用mysql</h2><h3 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql;"></a>安装mysql;</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mysql</span><br></pre></td></tr></table></figure>

<p>单独创建一个utils工具方法文件;</p>
<ol>
<li>引入mysql</li>
<li>创建连接池</li>
<li>对数据库进行增删改查操作的基础方法</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 连接池</span></span><br><span class="line"><span class="keyword">const</span> pool = mysql.<span class="title function_">createPool</span>(&#123;</span><br><span class="line">  <span class="attr">hose</span>: <span class="string">&#x27;localhost&#x27;</span>, <span class="comment">// 连接服务器的(代码部署后，需要改为内网IP，而非外网)</span></span><br><span class="line">  <span class="attr">port</span>: <span class="number">3306</span>,        <span class="comment">// mysql运行的端口</span></span><br><span class="line">  <span class="attr">database</span>: <span class="string">&#x27;cms&#x27;</span>,   <span class="comment">// 某个数据库</span></span><br><span class="line">  <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,      <span class="comment">// 数据库用户名</span></span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span> <span class="comment">// 数据库密码</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 操作数据库方法</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">query</span> = (<span class="params">sql, callback</span>) =&gt; &#123;</span><br><span class="line">  pool.<span class="title function_">getConnection</span>(<span class="keyword">function</span>(<span class="params">err, connection</span>) &#123;</span><br><span class="line">    connection.<span class="title function_">query</span>(sql, <span class="keyword">function</span>(<span class="params">err, rows</span>) &#123;</span><br><span class="line">      <span class="title function_">callback</span>(err, rows)</span><br><span class="line">      connection.<span class="title function_">release</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  query</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="调用mysql"><a href="#调用mysql" class="headerlink" title="调用mysql"></a>调用mysql</h3><p>上面的<code>query</code>主要方法：</p>
<blockquote>
<p>query接收两个参数：</p>
<p>1.sql语句</p>
<p>2.回调函数(err,rows) rows就是查询到的数据</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; query &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../../mysql&#x27;</span>)</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 获取到数据(需要使用到同步，等待获取到数据再返回)</span></span><br><span class="line">  <span class="keyword">let</span> result = <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">queryData</span>(<span class="string">&#x27;select * from user &#x27;</span>, <span class="function">(<span class="params">err, rows</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(err)&#123;<span class="title function_">reject</span>(err)&#125;</span><br><span class="line">      <span class="title function_">resolve</span>(rows)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 返回数据给前端</span></span><br><span class="line">  ctx.<span class="property">body</span> = result</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</article><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/07/16/%E4%B8%80%E5%B0%8F%E6%97%B6%E6%8B%BF%E6%8D%8FNginx/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/default_cover.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/berniezhong/picture-bed/github/202304200914033.png" onerror="onerror=null;src='/img/default_cover.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">一小时Nginx学习</div></div></a></div><div class="next-post pull-right"><a href="/2022/09/03/Nestjs/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/default_cover.jpg&quot;" data-lazy-src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic1.zhimg.com%2Fv2-f6241353ba024915b991e8d5847b8da2_1440w.jpg%3Fsource%3D172ae18b&amp;refer=http%3A%2F%2Fpic1.zhimg.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1659410579&amp;t=a3fd1f73c15a8fe0f9b98e0520731d31" onerror="onerror=null;src='/img/default_cover.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Nest.js</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/default_cover.jpg&quot;" data-lazy-src="/img/baby.png" onerror="this.onerror=null;this.src='/img/404.gif'" alt="avatar"/></div><div class="author-info__description"></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">知瑾</h1><div class="author-info__desc">生活明朗 万物可爱</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/berniezwd" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">简单介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E7%9A%84%E8%AF%AD%E5%8F%A5%E5%88%86%E7%B1%BB"><span class="toc-number">1.1.</span> <span class="toc-text">SQL的语句分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4%EF%BC%9A"><span class="toc-number">1.2.</span> <span class="toc-text">常用基本命令：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Mac%E4%B8%8B%E5%AE%89%E8%A3%85-mysql"><span class="toc-number">2.</span> <span class="toc-text">Mac下安装 mysql</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E5%81%9C%E6%AD%A2%E9%87%8D%E5%90%AF%E5%91%BD%E4%BB%A4"><span class="toc-number">2.1.</span> <span class="toc-text">启动停止重启命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%BB%88%E7%AB%AF%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.2.</span> <span class="toc-text">使用终端连接数据库</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">3.</span> <span class="toc-text">库的基本操作</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A1%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">4.</span> <span class="toc-text">表的基本操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.1.</span> <span class="toc-text">字段类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-number">4.2.</span> <span class="toc-text">创建表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8"><span class="toc-number">4.3.</span> <span class="toc-text">查看表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="toc-number">4.4.</span> <span class="toc-text">删除表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E8%A1%A8"><span class="toc-number">4.5.</span> <span class="toc-text">复制表</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="toc-number">5.</span> <span class="toc-text">数据的增删改查</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.1.</span> <span class="toc-text">条件查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E8%A1%8C%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0"><span class="toc-number">5.2.</span> <span class="toc-text">单行处理函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0%EF%BC%88%E5%A4%9A%E8%A1%8C%E5%A4%84%E7%90%86%EF%BC%89"><span class="toc-number">5.3.</span> <span class="toc-text">分组函数（多行处理）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-number">5.4.</span> <span class="toc-text">排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E9%A1%BA%E5%BA%8F%E6%80%BB%E7%BB%93"><span class="toc-number">5.5.</span> <span class="toc-text">查询顺序总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#limit"><span class="toc-number">5.6.</span> <span class="toc-text">limit</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#union%E5%90%88%E5%B9%B6%E9%9B%86%E5%90%88"><span class="toc-number">5.7.</span> <span class="toc-text">union合并集合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#distinct%E5%8E%BB%E9%99%A4%E9%87%8D%E5%A4%8D"><span class="toc-number">5.8.</span> <span class="toc-text">distinct去除重复</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.9.</span> <span class="toc-text">连接查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.10.</span> <span class="toc-text">子查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F"><span class="toc-number">5.11.</span> <span class="toc-text">约束</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">6.</span> <span class="toc-text">事务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1%EF%BC%9A"><span class="toc-number">6.1.</span> <span class="toc-text">提交事务：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9E%E6%BB%9A%E4%BA%8B%E5%8A%A1%EF%BC%9A"><span class="toc-number">6.2.</span> <span class="toc-text">回滚事务：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%89%B9%E6%80%A7%EF%BC%9A"><span class="toc-number">6.3.</span> <span class="toc-text">事务特性：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%EF%BC%9A"><span class="toc-number">6.4.</span> <span class="toc-text">事务隔离：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E8%8C%83%E5%BC%8F"><span class="toc-number">7.</span> <span class="toc-text">数据库三范式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Koa%E4%B8%AD%E4%BD%BF%E7%94%A8mysql"><span class="toc-number">7.1.</span> <span class="toc-text">Koa中使用mysql</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85mysql"><span class="toc-number">7.1.1.</span> <span class="toc-text">安装mysql;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E7%94%A8mysql"><span class="toc-number">7.1.2.</span> <span class="toc-text">调用mysql</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/08/06/2K%E6%98%BE%E7%A4%BA%E5%99%A8%E5%BC%80%E5%90%AFhidpi/" title="2K显示器开启Hidpi"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/default_cover.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/berniezhong/picture-bed/github/202408061438957.png" onerror="this.onerror=null;this.src='/img/default_cover.jpg'" alt="2K显示器开启Hidpi"/></a><div class="content"><a class="title" href="/2024/08/06/2K%E6%98%BE%E7%A4%BA%E5%99%A8%E5%BC%80%E5%90%AFhidpi/" title="2K显示器开启Hidpi">2K显示器开启Hidpi</a><time datetime="2024-08-05T16:00:00.000Z" title="发表于 2024-08-06 00:00:00">2024-08-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/13/Docker%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5/" title="Docker认识"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/default_cover.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/berniezhong/picture-bed/github/202407131500894.png" onerror="this.onerror=null;this.src='/img/default_cover.jpg'" alt="Docker认识"/></a><div class="content"><a class="title" href="/2024/07/13/Docker%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5/" title="Docker认识">Docker认识</a><time datetime="2024-07-12T16:00:00.000Z" title="发表于 2024-07-13 00:00:00">2024-07-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/13/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E9%95%9C%E5%83%8F%E6%BA%90%E9%97%AE%E9%A2%98/" title="Docker安装与镜像源问题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/default_cover.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/berniezhong/picture-bed/github/202407131500894.png" onerror="this.onerror=null;this.src='/img/default_cover.jpg'" alt="Docker安装与镜像源问题"/></a><div class="content"><a class="title" href="/2024/07/13/Docker%E5%AE%89%E8%A3%85%E4%B8%8E%E9%95%9C%E5%83%8F%E6%BA%90%E9%97%AE%E9%A2%98/" title="Docker安装与镜像源问题">Docker安装与镜像源问题</a><time datetime="2024-07-12T16:00:00.000Z" title="发表于 2024-07-13 00:00:00">2024-07-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/13/Docker%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4/" title="Docker操作命令"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/default_cover.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/berniezhong/picture-bed/github/202407131500894.png" onerror="this.onerror=null;this.src='/img/default_cover.jpg'" alt="Docker操作命令"/></a><div class="content"><a class="title" href="/2024/07/13/Docker%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4/" title="Docker操作命令">Docker操作命令</a><time datetime="2024-07-12T16:00:00.000Z" title="发表于 2024-07-13 00:00:00">2024-07-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/13/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/" title="云服务器相关"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/default_cover.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/berniezhong/picture-bed/github/202407131709165.png" onerror="this.onerror=null;this.src='/img/default_cover.jpg'" alt="云服务器相关"/></a><div class="content"><a class="title" href="/2024/07/13/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/" title="云服务器相关">云服务器相关</a><time datetime="2024-07-12T16:00:00.000Z" title="发表于 2024-07-13 00:00:00">2024-07-13</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 By 知瑾</div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">42</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">33</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">31</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">React</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://berniezwd.github.io/REACT_MARQUEE/" title="跑马灯"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/default_cover.jpg&quot;" data-lazy-src="/img/project/marquee.png" alt="跑马灯"/><span class="back-menu-item-text">跑马灯</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">有趣</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://berniezwd.github.io/PeopleJS/" title="人潮汹涌"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/default_cover.jpg&quot;" data-lazy-src="/img/project/people.png" alt="人潮汹涌"/><span class="back-menu-item-text">人潮汹涌</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 即刻短文</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Docker/" style="font-size: 0.88rem;">Docker<sup>3</sup></a><a href="/tags/Html/" style="font-size: 0.88rem;">Html<sup>1</sup></a><a href="/tags/JavaScript/" style="font-size: 0.88rem;">JavaScript<sup>4</sup></a><a href="/tags/Jenkins%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/" style="font-size: 0.88rem;">Jenkins自动化部署<sup>1</sup></a><a href="/tags/Nginx/" style="font-size: 0.88rem;">Nginx<sup>1</sup></a><a href="/tags/Pinia/" style="font-size: 0.88rem;">Pinia<sup>1</sup></a><a href="/tags/React/" style="font-size: 0.88rem;">React<sup>4</sup></a><a href="/tags/Redux/" style="font-size: 0.88rem;">Redux<sup>1</sup></a><a href="/tags/TypeScript/" style="font-size: 0.88rem;">TypeScript<sup>1</sup></a><a href="/tags/Vue/" style="font-size: 0.88rem;">Vue<sup>2</sup></a><a href="/tags/axios/" style="font-size: 0.88rem;">axios<sup>1</sup></a><a href="/tags/centOS/" style="font-size: 0.88rem;">centOS<sup>1</sup></a><a href="/tags/css/" style="font-size: 0.88rem;">css<sup>2</sup></a><a href="/tags/electron/" style="font-size: 0.88rem;">electron<sup>1</sup></a><a href="/tags/koa/" style="font-size: 0.88rem;">koa<sup>1</sup></a><a href="/tags/mysql/" style="font-size: 0.88rem;">mysql<sup>1</sup></a><a href="/tags/nestjs/" style="font-size: 0.88rem;">nestjs<sup>1</sup></a><a href="/tags/node/" style="font-size: 0.88rem;">node<sup>1</sup></a><a href="/tags/sass/" style="font-size: 0.88rem;">sass<sup>1</sup></a><a href="/tags/uniapp/" style="font-size: 0.88rem;">uniapp<sup>1</sup></a><a href="/tags/vim/" style="font-size: 0.88rem;">vim<sup>1</sup></a><a href="/tags/vite/" style="font-size: 0.88rem;">vite<sup>1</sup></a><a href="/tags/vue/" style="font-size: 0.88rem;">vue<sup>1</sup></a><a href="/tags/vue3/" style="font-size: 0.88rem;">vue3<sup>1</sup></a><a href="/tags/%E4%BA%91%E6%9C%8D%E5%8A%A1/" style="font-size: 0.88rem;">云服务<sup>1</sup></a><a href="/tags/%E5%8F%B3%E9%94%AEcmd/" style="font-size: 0.88rem;">右键cmd<sup>1</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7%E7%B1%BB/" style="font-size: 0.88rem;">工具类<sup>2</sup></a><a href="/tags/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" style="font-size: 0.88rem;">开发环境搭建<sup>1</sup></a><a href="/tags/%E6%96%87%E4%BB%B6%E8%B7%AF%E7%94%B1/" style="font-size: 0.88rem;">文件路由<sup>1</sup></a><a href="/tags/%E6%A0%87%E7%AD%BE%E5%A4%96%E6%8C%82/" style="font-size: 0.88rem;">标签外挂<sup>1</sup></a><a href="/tags/%E9%9B%B6%E6%95%A3/" style="font-size: 0.88rem;">零散<sup>1</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 0.88rem;">面试<sup>1</sup></a><a href="/tags/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA%E8%A7%84%E8%8C%83/" style="font-size: 0.88rem;">项目搭建规范<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js').then(runMermaid)
  }

  anzhiyu.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'Rx9TnE1k1TFznGsBX5hvBTg2-gzGzoHsz',
      appKey: 'ReVHDww8qvNFAR7CALtta8S5',
      avatar: 'mp',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.cbd.int/valine@1.5.1/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Valine' === 'Valine' || !true) {
    if (true) anzhiyu.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script src="https://cdn.cbd.int/blueimp-md5@2.19.0/js/md5.min.js"></script><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (icon, mail) => {
    if (icon) return icon
    let defaultIcon = '?d=mp'
    let iconUrl = `https://gravatar.loli.net/avatar/${md5(mail.toLowerCase()) + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const serverURL = 'https://Rx9TnE1k.api.lncldglobal.com'

    var settings = {
      "method": "GET",
      "headers": {
        "X-LC-Id": 'Rx9TnE1k1TFznGsBX5hvBTg2-gzGzoHsz',
        "X-LC-Key": 'ReVHDww8qvNFAR7CALtta8S5',
        "Content-Type": "application/json"
      },
    }

    fetch(`${serverURL}/1.1/classes/Comment?limit=6&order=-createdAt`,settings)
      .then(response => response.json())
      .then(data => {
        const valineArray = data.results.map(function (e) {
          return {
            'avatar': getIcon(e.QQAvatar, e.mail),
            'content': changeContent(e.comment),
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.updatedAt,
          }
        })
        saveToLocal.set('valine-newest-comments', JSON.stringify(valineArray), 10/(60*24))
        generateHtml(valineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      }) 
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('valine-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>